---
title: Terraform provider resources
description: Terraform provider resources reference
version: '13.x'
---

{/* Content generated by teleport-plugins/terraform/gen/main.go DO NOT EDIT */}

Supported resources:

- [teleport\_app](#teleport_app)
- [teleport\_auth\_preference](#teleport_auth_preference)
- [teleport\_bot](#teleport_bot)
- [teleport\_cluster\_networking\_config](#teleport_cluster_networking_config)
- [teleport\_database](#teleport_database)
- [teleport\_github\_connector](#teleport_github_connector)
- [teleport\_login\_rule](#teleport_login_rule)
- [teleport\_oidc\_connector](#teleport_oidc_connector)
- [teleport\_okta\_import\_rule](#teleport_okta_import_rule)
- [teleport\_provision\_token](#teleport_provision_token)
- [teleport\_role](#teleport_role)
- [teleport\_saml\_connector](#teleport_saml_connector)
- [teleport\_session\_recording\_config](#teleport_session_recording_config)
- [teleport\_trusted\_cluster](#teleport_trusted_cluster)
- [teleport\_trusted\_device](#teleport_trusted_device)
- [teleport\_user](#teleport_user)

## Provider configuration

Ensure your Terraform version is v1.0.0 or higher.

Add the following configuration section to your `terraform` configuration block:

```
terraform {
  required_providers {
    teleport = {
      version = "~> 13.0"
      source  = "terraform.releases.teleport.dev/gravitational/teleport"
    }
  }
}
```

The provider supports the following options:

| Name                   | Type   | Description                                                                    | Environment Variable               |
| ---------------------- | ------ | ------------------------------------------------------------------------------ | ---------------------------------- |
| `addr`                 | string | Teleport auth or proxy address in "host:port" format.                          | `TF_TELEPORT_ADDR`                 |
| `cert_path`            | string | Path to Teleport certificate file.                                             | `TF_TELEPORT_CERT`                 |
| `cert_base64`          | string | Teleport certificate as base64.                                                | `TF_TELEPORT_CERT_BASE64`          |
| `identity_file_path`   | string | Path to Teleport identity file.                                                | `TF_TELEPORT_IDENTITY_FILE_PATH`   |
| `identity_file_base64` | string | Teleport identity file as base64.                                              | `TF_TELEPORT_IDENTITY_FILE_BASE64` |
| `key_path`             | string | Path to Teleport key file.                                                     | `TF_TELEPORT_KEY`                  |
| `key_base64`           | string | Teleport key as base64.                                                        | `TF_TELEPORT_KEY_BASE64`           |
| `profile_dir`          | string | Teleport profile path.                                                         | `TF_TELEPORT_PROFILE_PATH`         |
| `profile_name`         | string | Teleport profile name.                                                         | `TF_TELEPORT_PROFILE_NAME`         |
| `root_ca_path`         | string | Path to Teleport CA file.                                                      | `TF_TELEPORT_ROOT_CA`              |
| `root_ca_base64`       | string | Teleport CA as base64.                                                         | `TF_TELEPORT_ROOT_CA_BASE64`       |
| `retry_base_duration`  | string | Base duration between retries. [Format](https://pkg.go.dev/time#ParseDuration) | `TF_TELEPORT_RETRY_BASE_DURATION`  |
| `retry_cap_duration`   | string | Max duration between retries. [Format](https://pkg.go.dev/time#ParseDuration)  | `TF_TELEPORT_RETRY_CAP_DURATION`   |
| `retry_max_tries`      | string | Max number of retries.                                                         | `TF_TELEPORT_RETRY_MAX_TRIES`      |

You need to specify at least one of:

- `cert_path`, `key_path`,`root_ca_path` and `addr` to connect using key files.
- `cert_base64`, `key_base64`,`root_ca_base64` and `addr` to connect using a base64-encoded key.
- `identity_file_path` or `identity_file_base64` and `addr` to connect using an identity file.
- `profile_name`, `profile_dir` (both can be empty) and `addr` to connect using current profile from `~/.tsh`

The `retry_*` values are used to retry the API calls to Teleport when the cache is stale.

If more than one are provided, they will be tried in the order above until one succeeds.

Example:

```
provider "teleport" {
  addr         = "localhost:3025"
  cert_path    = "tf.crt"
  key_path     = "tf.key"
  root_ca_path = "tf.ca"
}
```

## teleport\_app

| Name      | Type   | Required | Description                              |
| --------- | ------ | -------- | ---------------------------------------- |
| metadata  | object |          | Metadata is the app resource metadata.   |
| spec      | object |          | Spec is the app resource spec.           |
| sub\_kind | string |          | SubKind is an optional resource subkind. |
| version   | string |          | Version is the resource version.         |

### metadata

Metadata is the app resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is the app resource spec.

| Name                   | Type             | Required | Description                                                               |
| ---------------------- | ---------------- | -------- | ------------------------------------------------------------------------- |
| aws                    | object           |          | AWS contains additional options for AWS applications.                     |
| cloud                  | string           |          | Cloud identifies the cloud instance the app represents.                   |
| dynamic\_labels        | object           |          | DynamicLabels are the app's command labels.                               |
| insecure\_skip\_verify | bool             |          | InsecureSkipVerify disables app's TLS certificate verification.           |
| public\_addr           | string           |          | PublicAddr is the public address the application is accessible at.        |
| rewrite                | object           |          | Rewrite is a list of rewriting rules to apply to requests and responses.  |
| uri                    | string           |          | URI is the web app endpoint.                                              |
| user\_groups           | array of strings |          | UserGroups are a list of user group IDs that this app is associated with. |

#### spec.aws

AWS contains additional options for AWS applications.

| Name         | Type   | Required | Description                                                             |
| ------------ | ------ | -------- | ----------------------------------------------------------------------- |
| external\_id | string |          | ExternalID is the AWS External ID used when assuming roles in this app. |

#### spec.dynamic\_labels

DynamicLabels are the app's command labels.

| Name    | Type             | Required | Description                           |
| ------- | ---------------- | -------- | ------------------------------------- |
| command | array of strings |          | Command is a command to run           |
| period  | duration         |          | Period is a time between command runs |
| result  | string           |          | Result captures standard output       |

#### spec.rewrite

Rewrite is a list of rewriting rules to apply to requests and responses.

| Name        | Type             | Required | Description                                                                                                                               |
| ----------- | ---------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| headers     | object           |          | Headers is a list of headers to inject when passing the request over to the application.                                                  |
| jwt\_claims | string           |          | JWTClaims configures whether roles/traits are included in the JWT token.                                                                  |
| redirect    | array of strings |          | Redirect defines a list of hosts which will be rewritten to the public address of the application if they occur in the "Location" header. |

##### spec.rewrite.headers

Headers is a list of headers to inject when passing the request over to the application.

| Name  | Type   | Required | Description                     |
| ----- | ------ | -------- | ------------------------------- |
| name  | string |          | Name is the http header name.   |
| value | string |          | Value is the http header value. |

Example:

```
# Teleport App

resource "teleport_app" "example" {
  metadata = {
    name = "example"
    description = "Test app"
    labels = {
        "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
    }
  }

  spec = {
    uri = "localhost:3000"
  }
}
```

## teleport\_auth\_preference

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object | \*       | Spec is an AuthPreference specification                          |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is a resource version                                    |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is an AuthPreference specification

| Name                      | Type     | Required | Description                                                                                                                            |
| ------------------------- | -------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| allow\_headless           | bool     |          |                                                                                                                                        |
| allow\_local\_auth        | bool     |          |                                                                                                                                        |
| allow\_passwordless       | bool     |          |                                                                                                                                        |
| connector\_name           | string   |          | ConnectorName is the name of the OIDC or SAML connector. If this value is not set the first connector in the backend will be used.     |
| default\_session\_ttl     | duration |          | DefaultSessionTTL is the TTL to use for user certs when an explicit TTL is not requested.                                              |
| device\_trust             | object   |          | DeviceTrust holds settings related to trusted device verification. Requires Teleport Enterprise.                                       |
| disconnect\_expired\_cert | bool     |          |                                                                                                                                        |
| idp                       | object   |          | IDP is a set of options related to accessing IdPs within Teleport. Requires Teleport Enterprise.                                       |
| locking\_mode             | string   |          | LockingMode is the cluster-wide locking mode default.                                                                                  |
| message\_of\_the\_day     | string   |          |                                                                                                                                        |
| okta                      | object   |          | Okta is a set of options related to the Okta service in Teleport. Requires Teleport Enterprise.                                        |
| require\_session\_mfa     | number   |          | RequireMFAType is the type of MFA requirement enforced for this cluster: 0:Off, 1:Session, 2:SessionAndHardwareKey, 3:HardwareKeyTouch |
| second\_factor            | string   |          | SecondFactor is the type of second factor.                                                                                             |
| type                      | string   |          | Type is the type of authentication.                                                                                                    |
| u2f                       | object   |          | U2F are the settings for the U2F device.                                                                                               |
| webauthn                  | object   |          | Webauthn are the settings for server-side Web Authentication support.                                                                  |

#### spec.device\_trust

DeviceTrust holds settings related to trusted device verification. Requires Teleport Enterprise.

| Name                 | Type             | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| -------------------- | ---------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| auto\_enroll         | bool             |          | Enable device auto-enroll. Auto-enroll lets any user issue a device enrollment token for a known device that is not already enrolled. `tsh` takes advantage of auto-enroll to automatically enroll devices on user login, when appropriate. The effective cluster Mode still applies: AutoEnroll=true is meaningless if Mode="off".                                                                                                                      |
| ekcert\_allowed\_cas | array of strings |          | Allow list of EKCert CAs in PEM format. If present, only TPM devices that present an EKCert that is signed by a CA specified here may be enrolled (existing enrollments are unchanged).  If not present, then the CA of TPM EKCerts will not be checked during enrollment, this allows any device to enroll.                                                                                                                                             |
| mode                 | string           |          | Mode of verification for trusted devices.  The following modes are supported:  - "off": disables both device authentication and authorization. - "optional": allows both device authentication and authorization, but doesn't enforce the presence of device extensions for sensitive endpoints. - "required": enforces the presence of device extensions for sensitive endpoints.  Mode is always "off" for OSS. Defaults to "optional" for Enterprise. |

#### spec.idp

IDP is a set of options related to accessing IdPs within Teleport. Requires Teleport Enterprise.

| Name | Type   | Required | Description                                        |
| ---- | ------ | -------- | -------------------------------------------------- |
| saml | object |          | SAML are options related to the Teleport SAML IdP. |

##### spec.idp.saml

SAML are options related to the Teleport SAML IdP.

| Name    | Type | Required | Description |
| ------- | ---- | -------- | ----------- |
| enabled | bool |          |             |

#### spec.okta

Okta is a set of options related to the Okta service in Teleport. Requires Teleport Enterprise.

| Name         | Type     | Required | Description                                                              |
| ------------ | -------- | -------- | ------------------------------------------------------------------------ |
| sync\_period | duration |          | SyncPeriod is the duration between synchronization calls in nanoseconds. |

#### spec.u2f

U2F are the settings for the U2F device.

| Name                     | Type             | Required | Description                                                                                                                                                                                               |
| ------------------------ | ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| app\_id                  | string           |          | AppID returns the application ID for universal second factor.                                                                                                                                             |
| device\_attestation\_cas | array of strings |          | DeviceAttestationCAs contains the trusted attestation CAs for U2F devices.                                                                                                                                |
| facets                   | array of strings |          | Facets returns the facets for universal second factor. Deprecated: Kept for backwards compatibility reasons, but Facets have no effect since Teleport v10, when Webauthn replaced the U2F implementation. |

#### spec.webauthn

Webauthn are the settings for server-side Web Authentication support.

| Name                      | Type             | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------------- | ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| attestation\_allowed\_cas | array of strings |          | Allow list of device attestation CAs in PEM format. If present, only devices whose attestation certificates match the certificates specified here may be registered (existing registrations are unchanged). If supplied in conjunction with AttestationDeniedCAs, then both conditions need to be true for registration to be allowed (the device MUST match an allowed CA and MUST NOT match a denied CA). By default all devices are allowed.     |
| attestation\_denied\_cas  | array of strings |          | Deny list of device attestation CAs in PEM format. If present, only devices whose attestation certificates don't match the certificates specified here may be registered (existing registrations are unchanged). If supplied in conjunction with AttestationAllowedCAs, then both conditions need to be true for registration to be allowed (the device MUST match an allowed CA and MUST NOT match a denied CA). By default no devices are denied. |
| rp\_id                    | string           |          | RPID is the ID of the Relying Party. It should be set to the domain name of the Teleport installation.  IMPORTANT: RPID must never change in the lifetime of the cluster, because it's recorded in the registration data on the WebAuthn device. If the RPID changes, all existing WebAuthn key registrations will become invalid and all users who use WebAuthn as the second factor will need to re-register.                                     |

Example:

```
# AuthPreference resource

resource "teleport_auth_preference" "example" {
  metadata = {
    description = "Auth preference"
    labels = {
      "example" = "yes"
      "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
    }
  }

  spec = {
    disconnect_expired_cert = true
  }
}

```

## teleport\_bot

| Name       | Type                 | Required | Description                                                                                                                                                   |
| ---------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| name       | string               | \*       | The name of the bot, i.e. the unprefixed User name                                                                                                            |
| role\_name | string               |          | The name of the generated bot role                                                                                                                            |
| roles      | array of strings     | \*       | A list of roles the created bot should be allowed to assume via role impersonation.                                                                           |
| token\_id  | string               | \*       | The bot joining token. If unset, a new random token is created and its name returned, otherwise a preexisting Bot token may be provided for IAM/OIDC joining. |
| token\_ttl | string               |          | The desired TTL for the token if one is created. If unset, a server default is used                                                                           |
| traits     | map of string arrays |          |                                                                                                                                                               |
| user\_name | string               |          | The name of the generated bot user                                                                                                                            |

Example:

```
# Teleport Machine ID Bot creation example

locals {
  bot_name = "example"
}

resource "random_password" "bot_token" {
  length           = 32
  special          = false
}

resource "time_offset" "bot_example_token_expiry" {
  offset_hours = 1
}

resource "teleport_provision_token" "bot_example" {
  metadata = {
    expires = time_offset.bot_example_token_expiry.rfc3339
    description = "Bot join token for ${local.bot_name} generated by Terraform"

    name = random_password.bot_token.result
  }

  spec = {
    roles = ["Bot"]
    bot_name = local.bot_name
    join_method = "token"
  }
}

resource "teleport_bot" "example" {
  name = local.bot_name
  token_id = teleport_provision_token.bot_example.metadata.name
  roles = ["access"]
}

```

## teleport\_cluster\_networking\_config

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object |          | Spec is a ClusterNetworkingConfig specification                  |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is a resource version                                    |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a ClusterNetworkingConfig specification

| Name                                | Type     | Required | Description                                                                                                                                                                                             |
| ----------------------------------- | -------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| assist\_command\_execution\_workers | number   |          | AssistCommandExecutionWorkers determines the number of workers that will execute arbitrary Assist commands on servers in parallel                                                                       |
| client\_idle\_timeout               | duration |          | ClientIdleTimeout sets global cluster default setting for client idle timeouts.                                                                                                                         |
| idle\_timeout\_message              | string   |          | ClientIdleTimeoutMessage is the message sent to the user when a connection times out.                                                                                                                   |
| keep\_alive\_count\_max             | number   |          | KeepAliveCountMax is the number of keep-alive messages that can be missed before the server disconnects the connection to the client.                                                                   |
| keep\_alive\_interval               | duration |          | KeepAliveInterval is the interval at which the server sends keep-alive messages to the client.                                                                                                          |
| proxy\_listener\_mode               | number   |          | ProxyListenerMode is proxy listener mode used by Teleport Proxies.                                                                                                                                      |
| proxy\_ping\_interval               | duration |          | ProxyPingInterval defines in which interval the TLS routing ping message should be sent. This is applicable only when using ping-wrapped connections, regular TLS routing connections are not affected. |
| routing\_strategy                   | number   |          | RoutingStrategy determines the strategy used to route to nodes.                                                                                                                                         |
| session\_control\_timeout           | duration |          | SessionControlTimeout is the session control lease expiry and defines the upper limit of how long a node may be out of contact with the auth server before it begins terminating controlled sessions.   |
| tunnel\_strategy                    | object   |          | TunnelStrategyV1 determines the tunnel strategy used in the cluster.                                                                                                                                    |
| web\_idle\_timeout                  | duration |          | WebIdleTimeout sets global cluster default setting for the web UI idle timeouts.                                                                                                                        |

#### spec.tunnel\_strategy

TunnelStrategyV1 determines the tunnel strategy used in the cluster.

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| agent\_mesh    | object |          |             |
| proxy\_peering | object |          |             |

##### spec.tunnel\_strategy.agent\_mesh

| Name   | Type | Required | Description                                                   |
| ------ | ---- | -------- | ------------------------------------------------------------- |
| active | bool |          | Automatically generated field preventing empty message errors |

##### spec.tunnel\_strategy.proxy\_peering

| Name                     | Type   | Required | Description |
| ------------------------ | ------ | -------- | ----------- |
| agent\_connection\_count | number |          |             |

Example:

```
# Teleport Cluster Networking config

resource "teleport_cluster_networking_config" "example" {
   metadata = {
    description = "Networking config"
    labels = {
      "example" = "yes"
      "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
    }
  }

  spec = {
    client_idle_timeout = "1h"
  }
}
```

## teleport\_database

| Name      | Type   | Required | Description                              |
| --------- | ------ | -------- | ---------------------------------------- |
| metadata  | object |          | Metadata is the database metadata.       |
| spec      | object |          | Spec is the database spec.               |
| sub\_kind | string |          | SubKind is an optional resource subkind. |
| version   | string |          | Version is the resource version.         |

### metadata

Metadata is the database metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is the database spec.

| Name            | Type   | Required | Description                                                                                                                                  |
| --------------- | ------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| ad              | object |          | AD is the Active Directory configuration for the database.                                                                                   |
| admin\_user     | object |          | AdminUser is the database admin user for automatic user provisioning.                                                                        |
| aws             | object |          | AWS contains AWS specific settings for RDS/Aurora/Redshift databases.                                                                        |
| azure           | object |          | Azure contains Azure specific database metadata.                                                                                             |
| ca\_cert        | string |          | CACert is the PEM-encoded database CA certificate.  DEPRECATED: Moved to TLS.CACert. DELETE IN 10.0.                                         |
| dynamic\_labels | object |          | DynamicLabels is the database dynamic labels.                                                                                                |
| gcp             | object |          | GCP contains parameters specific to GCP Cloud SQL databases.                                                                                 |
| mongo\_atlas    | object |          | MongoAtlas contains Atlas metadata about the database.                                                                                       |
| mysql           | object |          | MySQL is an additional section with MySQL database options.                                                                                  |
| protocol        | string | \*       | Protocol is the database protocol: postgres, mysql, mongodb, etc.                                                                            |
| tls             | object |          | TLS is the TLS configuration used when establishing connection to target database. Allows to provide custom CA cert or override server name. |
| uri             | string | \*       | URI is the database connection endpoint.                                                                                                     |

#### spec.ad

AD is the Active Directory configuration for the database.

| Name            | Type   | Required | Description                                                                             |
| --------------- | ------ | -------- | --------------------------------------------------------------------------------------- |
| domain          | string |          | Domain is the Active Directory domain the database resides in.                          |
| kdc\_host\_name | string |          | KDCHostName is the host name for a KDC for x509 Authentication.                         |
| keytab\_file    | string |          | KeytabFile is the path to the Kerberos keytab file.                                     |
| krb5\_file      | string |          | Krb5File is the path to the Kerberos configuration file. Defaults to /etc/krb5.conf.    |
| ldap\_cert      | string |          | LDAPCert is a certificate from Windows LDAP/AD, optional; only for x509 Authentication. |
| spn             | string |          | SPN is the service principal name for the database.                                     |

#### spec.admin\_user

AdminUser is the database admin user for automatic user provisioning.

| Name | Type   | Required | Description                                           |
| ---- | ------ | -------- | ----------------------------------------------------- |
| name | string |          | Name is the username of the privileged database user. |

#### spec.aws

AWS contains AWS specific settings for RDS/Aurora/Redshift databases.

| Name                 | Type   | Required | Description                                                                                                                                                                                                                                                                          |
| -------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| account\_id          | string |          | AccountID is the AWS account ID this database belongs to.                                                                                                                                                                                                                            |
| assume\_role\_arn    | string |          | AssumeRoleARN is an optional AWS role ARN to assume when accessing a database. Set this field and ExternalID to enable access across AWS accounts.                                                                                                                                   |
| elasticache          | object |          | ElastiCache contains AWS ElastiCache Redis specific metadata.                                                                                                                                                                                                                        |
| external\_id         | string |          | ExternalID is an optional AWS external ID used to enable assuming an AWS role across accounts.                                                                                                                                                                                       |
| iam\_policy\_status  | number |          | IAMPolicyStatus indicates whether the IAM Policy is configured properly for database access. If not, the user must update the AWS profile identity to allow access to the Database. Eg for an RDS Database: the underlying AWS profile allows for `rds-db:connect` for the Database. |
| memorydb             | object |          | MemoryDB contains AWS MemoryDB specific metadata.                                                                                                                                                                                                                                    |
| opensearch           | object |          | OpenSearch contains AWS OpenSearch specific metadata.                                                                                                                                                                                                                                |
| rds                  | object |          | RDS contains RDS specific metadata.                                                                                                                                                                                                                                                  |
| rdsproxy             | object |          | RDSProxy contains AWS Proxy specific metadata.                                                                                                                                                                                                                                       |
| redshift             | object |          | Redshift contains Redshift specific metadata.                                                                                                                                                                                                                                        |
| redshift\_serverless | object |          | RedshiftServerless contains AWS Redshift Serverless specific metadata.                                                                                                                                                                                                               |
| region               | string |          | Region is a AWS cloud region.                                                                                                                                                                                                                                                        |
| secret\_store        | object |          | SecretStore contains secret store configurations.                                                                                                                                                                                                                                    |

##### spec.aws.elasticache

ElastiCache contains AWS ElastiCache Redis specific metadata.

| Name                         | Type             | Required | Description                                                                        |
| ---------------------------- | ---------------- | -------- | ---------------------------------------------------------------------------------- |
| endpoint\_type               | string           |          | EndpointType is the type of the endpoint.                                          |
| replication\_group\_id       | string           |          | ReplicationGroupID is the Redis replication group ID.                              |
| transit\_encryption\_enabled | bool             |          | TransitEncryptionEnabled indicates whether in-transit encryption (TLS) is enabled. |
| user\_group\_ids             | array of strings |          | UserGroupIDs is a list of user group IDs.                                          |

##### spec.aws.memorydb

MemoryDB contains AWS MemoryDB specific metadata.

| Name           | Type   | Required | Description                                                          |
| -------------- | ------ | -------- | -------------------------------------------------------------------- |
| acl\_name      | string |          | ACLName is the name of the ACL associated with the cluster.          |
| cluster\_name  | string |          | ClusterName is the name of the MemoryDB cluster.                     |
| endpoint\_type | string |          | EndpointType is the type of the endpoint.                            |
| tls\_enabled   | bool   |          | TLSEnabled indicates whether in-transit encryption (TLS) is enabled. |

##### spec.aws.opensearch

OpenSearch contains AWS OpenSearch specific metadata.

| Name           | Type   | Required | Description                               |
| -------------- | ------ | -------- | ----------------------------------------- |
| domain\_id     | string |          | DomainID is the ID of the domain.         |
| domain\_name   | string |          | DomainName is the name of the domain.     |
| endpoint\_type | string |          | EndpointType is the type of the endpoint. |

##### spec.aws.rds

RDS contains RDS specific metadata.

| Name         | Type             | Required | Description                                                       |
| ------------ | ---------------- | -------- | ----------------------------------------------------------------- |
| cluster\_id  | string           |          | ClusterID is the RDS cluster (Aurora) identifier.                 |
| iam\_auth    | bool             |          | IAMAuth indicates whether database IAM authentication is enabled. |
| instance\_id | string           |          | InstanceID is the RDS instance identifier.                        |
| resource\_id | string           |          | ResourceID is the RDS instance resource identifier (db-xxx).      |
| subnets      | array of strings |          | Subnets is a list of subnets for the RDS instance.                |
| vpc\_id      | string           |          | VPCID is the VPC where the RDS is running.                        |

##### spec.aws.rdsproxy

RDSProxy contains AWS Proxy specific metadata.

| Name                   | Type   | Required | Description                                                           |
| ---------------------- | ------ | -------- | --------------------------------------------------------------------- |
| custom\_endpoint\_name | string |          | CustomEndpointName is the identifier of an RDS Proxy custom endpoint. |
| name                   | string |          | Name is the identifier of an RDS Proxy.                               |
| resource\_id           | string |          | ResourceID is the RDS instance resource identifier (prx-xxx).         |

##### spec.aws.redshift

Redshift contains Redshift specific metadata.

| Name        | Type   | Required | Description                                   |
| ----------- | ------ | -------- | --------------------------------------------- |
| cluster\_id | string |          | ClusterID is the Redshift cluster identifier. |

##### spec.aws.redshift\_serverless

RedshiftServerless contains AWS Redshift Serverless specific metadata.

| Name            | Type   | Required | Description                            |
| --------------- | ------ | -------- | -------------------------------------- |
| endpoint\_name  | string |          | EndpointName is the VPC endpoint name. |
| workgroup\_id   | string |          | WorkgroupID is the workgroup ID.       |
| workgroup\_name | string |          | WorkgroupName is the workgroup name.   |

##### spec.aws.secret\_store

SecretStore contains secret store configurations.

| Name         | Type   | Required | Description                                        |
| ------------ | ------ | -------- | -------------------------------------------------- |
| key\_prefix  | string |          | KeyPrefix specifies the secret key prefix.         |
| kms\_key\_id | string |          | KMSKeyID specifies the AWS KMS key for encryption. |

#### spec.azure

Azure contains Azure specific database metadata.

| Name              | Type   | Required | Description                                                        |
| ----------------- | ------ | -------- | ------------------------------------------------------------------ |
| is\_flexi\_server | bool   |          | IsFlexiServer is true if the database is an Azure Flexible server. |
| name              | string |          | Name is the Azure database server name.                            |
| redis             | object |          | Redis contains Azure Cache for Redis specific database metadata.   |
| resource\_id      | string |          | ResourceID is the Azure fully qualified ID for the resource.       |

##### spec.azure.redis

Redis contains Azure Cache for Redis specific database metadata.

| Name               | Type   | Required | Description                                                     |
| ------------------ | ------ | -------- | --------------------------------------------------------------- |
| clustering\_policy | string |          | ClusteringPolicy is the clustering policy for Redis Enterprise. |

#### spec.dynamic\_labels

DynamicLabels is the database dynamic labels.

| Name    | Type             | Required | Description                           |
| ------- | ---------------- | -------- | ------------------------------------- |
| command | array of strings |          | Command is a command to run           |
| period  | duration         |          | Period is a time between command runs |
| result  | string           |          | Result captures standard output       |

#### spec.gcp

GCP contains parameters specific to GCP Cloud SQL databases.

| Name         | Type   | Required | Description                                                        |
| ------------ | ------ | -------- | ------------------------------------------------------------------ |
| instance\_id | string |          | InstanceID is the Cloud SQL instance ID.                           |
| project\_id  | string |          | ProjectID is the GCP project ID the Cloud SQL instance resides in. |

#### spec.mongo\_atlas

MongoAtlas contains Atlas metadata about the database.

| Name | Type   | Required | Description                               |
| ---- | ------ | -------- | ----------------------------------------- |
| name | string |          | Name is the Atlas database instance name. |

#### spec.mysql

MySQL is an additional section with MySQL database options.

| Name            | Type   | Required | Description                                                                                           |
| --------------- | ------ | -------- | ----------------------------------------------------------------------------------------------------- |
| server\_version | string |          | ServerVersion is the server version reported by DB proxy if the runtime information is not available. |

#### spec.tls

TLS is the TLS configuration used when establishing connection to target database. Allows to provide custom CA cert or override server name.

| Name         | Type   | Required | Description                                                                                                                        |
| ------------ | ------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| ca\_cert     | string |          | CACert is an optional user provided CA certificate used for verifying database TLS connection.                                     |
| mode         | number |          | Mode is a TLS connection mode. See DatabaseTLSMode for details.                                                                    |
| server\_name | string |          | ServerName allows to provide custom hostname. This value will override the servername/hostname on a certificate during validation. |

Example:

```
# Teleport Database

resource "teleport_database" "example" {
    metadata = {
        name = "example"
        description = "Test database"
        labels = {
            "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
        }
    }

    spec = {
        protocol = "postgres"
        uri = "localhost"
    }
}
```

## teleport\_github\_connector

| Name      | Type   | Required | Description                                                       |
| --------- | ------ | -------- | ----------------------------------------------------------------- |
| metadata  | object |          | Metadata holds resource metadata.                                 |
| spec      | object | \*       | Spec is an Github connector specification.                        |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources. |
| version   | string |          | Version is a resource version.                                    |

### metadata

Metadata holds resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is an Github connector specification.

| Name               | Type   | Required | Description                                                                                                                         |
| ------------------ | ------ | -------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| api\_endpoint\_url | string |          | APIEndpointURL is the URL of the API endpoint of the Github instance this connector is for.                                         |
| client\_id         | string | \*       | ClientID is the Github OAuth app client ID.                                                                                         |
| client\_secret     | string | \*       | ClientSecret is the Github OAuth app client secret.                                                                                 |
| display            | string |          | Display is the connector display name.                                                                                              |
| endpoint\_url      | string |          | EndpointURL is the URL of the GitHub instance this connector is for.                                                                |
| redirect\_url      | string |          | RedirectURL is the authorization callback URL.                                                                                      |
| teams\_to\_logins  | object |          | TeamsToLogins maps Github team memberships onto allowed logins/roles.  DELETE IN 11.0.0 Deprecated: use GithubTeamsToRoles instead. |
| teams\_to\_roles   | object |          | TeamsToRoles maps Github team memberships onto allowed roles.                                                                       |

#### spec.teams\_to\_logins

TeamsToLogins maps Github team memberships onto allowed logins/roles.  DELETE IN 11.0.0 Deprecated: use GithubTeamsToRoles instead.

| Name               | Type             | Required | Description                                                                       |
| ------------------ | ---------------- | -------- | --------------------------------------------------------------------------------- |
| kubernetes\_groups | array of strings |          | KubeGroups is a list of allowed kubernetes groups for this org/team.              |
| kubernetes\_users  | array of strings |          | KubeUsers is a list of allowed kubernetes users to impersonate for this org/team. |
| logins             | array of strings |          | Logins is a list of allowed logins for this org/team.                             |
| organization       | string           |          | Organization is a Github organization a user belongs to.                          |
| team               | string           |          | Team is a team within the organization a user belongs to.                         |

#### spec.teams\_to\_roles

TeamsToRoles maps Github team memberships onto allowed roles.

| Name         | Type             | Required | Description                                               |
| ------------ | ---------------- | -------- | --------------------------------------------------------- |
| organization | string           |          | Organization is a Github organization a user belongs to.  |
| roles        | array of strings |          | Roles is a list of allowed logins for this org/team.      |
| team         | string           |          | Team is a team within the organization a user belongs to. |

Example:

```
# Terraform Github connector

variable "github_secret" {}

resource "teleport_github_connector" "github" {
  # This section tells Terraform that role example must be created before the GitHub connector
  depends_on = [
    teleport_role.example
  ]

  metadata = {
     name = "example"
     labels = {
       example = "yes"
     }
  }

  spec = {
    client_id = "client"
    client_secret = var.github_secret

    teams_to_roles = [{
       organization = "gravitational"
       team = "devs"
       roles = ["example"]
    }]
  }
}

```

## teleport\_login\_rule

| Name               | Type   | Required | Description                                                                                                                                                       |
| ------------------ | ------ | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| metadata           | object |          | Metadata is resource metadata.                                                                                                                                    |
| priority           | number |          | Priority is the priority of the login rule relative to other login rules in the same cluster. Login rules with a lower numbered priority will be evaluated first. |
| traits\_expression | string |          | TraitsExpression is a predicate expression which should return the desired traits for the user upon login.                                                        |
| traits\_map        | object |          | TraitsMap is a map of trait keys to lists of predicate expressions which should evaluate to the desired values for that trait.                                    |
| version            | string |          | Version is the resource version.                                                                                                                                  |

### metadata

Metadata is resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         |          | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### traits\_map

TraitsMap is a map of trait keys to lists of predicate expressions which should evaluate to the desired values for that trait.

| Name   | Type             | Required | Description |
| ------ | ---------------- | -------- | ----------- |
| values | array of strings |          |             |

Example:

```
# Teleport Login Rule resource

resource "teleport_login_rule" "example" {
  metadata = {
    description = "Example Login Rule"
    labels = {
      "example" = "yes"
    }
  }

  version  = "v1"
  priority = 0
  traits_map = {
    "logins" = {
      values = [
        "external.logins",
        "external.username",
      ]
    }
    "groups" = {
      values = [
        "external.groups",
      ]
    }
  }
}

```

## teleport\_oidc\_connector

| Name      | Type   | Required | Description                                                       |
| --------- | ------ | -------- | ----------------------------------------------------------------- |
| metadata  | object |          | Metadata holds resource metadata.                                 |
| spec      | object | \*       | Spec is an OIDC connector specification.                          |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources. |
| version   | string |          | Version is a resource version.                                    |

### metadata

Metadata holds resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is an OIDC connector specification.

| Name                          | Type             | Required | Description                                                                                                                                    |
| ----------------------------- | ---------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| acr\_values                   | string           |          | ACR is an Authentication Context Class Reference value. The meaning of the ACR value is context-specific and varies for identity providers.    |
| allow\_unverified\_email      | bool             |          | AllowUnverifiedEmail tells the connector to accept OIDC users with unverified emails.                                                          |
| claims\_to\_roles             | object           |          | ClaimsToRoles specifies a dynamic mapping from claims to roles.                                                                                |
| client\_id                    | string           |          | ClientID is the id of the authentication client (Teleport Auth server).                                                                        |
| client\_secret                | string           |          | ClientSecret is used to authenticate the client.                                                                                               |
| display                       | string           |          | Display is the friendly name for this provider.                                                                                                |
| google\_admin\_email          | string           |          | GoogleAdminEmail is the email of a google admin to impersonate.                                                                                |
| google\_service\_account      | string           |          | GoogleServiceAccount is a string containing google service account credentials.                                                                |
| google\_service\_account\_uri | string           |          | GoogleServiceAccountURI is a path to a google service account uri.                                                                             |
| issuer\_url                   | string           |          | IssuerURL is the endpoint of the provider, e.g. [https://accounts.google.com](https://accounts.google.com).                                    |
| max\_age                      | duration         |          |                                                                                                                                                |
| prompt                        | string           |          | Prompt is an optional OIDC prompt. An empty string omits prompt. If not specified, it defaults to select\_account for backwards compatibility. |
| provider                      | string           |          | Provider is the external identity provider.                                                                                                    |
| redirect\_url                 | array of strings |          |                                                                                                                                                |
| scope                         | array of strings |          | Scope specifies additional scopes set by provider.                                                                                             |
| username\_claim               | string           |          | UsernameClaim specifies the name of the claim from the OIDC connector to be used as the user's username.                                       |

#### spec.claims\_to\_roles

ClaimsToRoles specifies a dynamic mapping from claims to roles.

| Name  | Type             | Required | Description                                        |
| ----- | ---------------- | -------- | -------------------------------------------------- |
| claim | string           |          | Claim is a claim name.                             |
| roles | array of strings |          | Roles is a list of static teleport roles to match. |
| value | string           |          | Value is a claim value to match.                   |

Example:

```
# Teleport OIDC connector
#
# Please note that OIDC connector will work in Enterprise version only. Check the setup docs:
# https://goteleport.com/docs/enterprise/sso/oidc/

variable "oidc_secret" {}

resource "teleport_oidc_connector" "example" {
  metadata = {
    name = "example"
    labels = {
      test = "yes"
    }
  }

  spec = {
    client_id = "client"
    client_secret = var.oidc_secret

    claims_to_roles = [{
      claim = "test"
      roles = ["terraform"]
    }]

    redirect_url = ["https://example.com/redirect"]
  }
}

```

## teleport\_okta\_import\_rule

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object | \*       | Spec is the specification for the Okta import rule.              |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is version                                               |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is the specification for the Okta import rule.

| Name     | Type   | Required | Description                                                                                           |
| -------- | ------ | -------- | ----------------------------------------------------------------------------------------------------- |
| mappings | object |          | Mappings is a list of matches that will map match conditions to labels.                               |
| priority | number |          | Priority represents the priority of the rule application. Lower numbered rules will be applied first. |

#### spec.mappings

Mappings is a list of matches that will map match conditions to labels.

| Name        | Type           | Required | Description                                                                                                 |
| ----------- | -------------- | -------- | ----------------------------------------------------------------------------------------------------------- |
| add\_labels | map of strings |          | AddLabels specifies which labels to add if any of the previous matches match.                               |
| match       | object         |          | Match is a set of matching rules for this mapping. If any of these match, then the mapping will be applied. |

##### spec.mappings.match

Match is a set of matching rules for this mapping. If any of these match, then the mapping will be applied.

| Name                 | Type             | Required | Description                                                         |
| -------------------- | ---------------- | -------- | ------------------------------------------------------------------- |
| app\_ids             | array of strings |          | AppIDs is a list of app IDs to match against.                       |
| app\_name\_regexes   | array of strings |          | AppNameRegexes is a list of regexes to match against app names.     |
| group\_ids           | array of strings |          | GroupIDs is a list of group IDs to match against.                   |
| group\_name\_regexes | array of strings |          | GroupNameRegexes is a list of regexes to match against group names. |

Example:

```
# Teleport Okta Import Rule resource

resource "teleport_okta_import_rule" "example" {
  metadata = {
    description = "Example Okta Import Rule"
    labels = {
      "example" = "yes"
    }
  }

  version  = "v1"

  spec = {
    priority = 100
    mappings = [
      {
        add_labels = {
          "label1": "value1"
        }
        match = [
          {
            app_ids = ["1", "2", "3"]
          },
        ],
      },
      {
        add_labels = {
          "label2": "value2"
        }
        match = [
          {
            group_ids = ["1", "2", "3"]
          },
        ],
      },
      {
        add_labels = {
          "label3" : "value3",
        }
        match = [
          {
            group_name_regexes = ["^.*$"]
          },
        ],
      },
      {
        add_labels = {
          "label4" : "value4",
        }
        match = [
          {
            app_name_regexes = ["^.*$"]
          },
        ],
      }
    ]
  }
}

```

## teleport\_provision\_token

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object | \*       | Spec is a provisioning token V2 spec                             |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is version                                               |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         |          | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a provisioning token V2 spec

| Name                              | Type                 | Required | Description                                                                                                                                             |
| --------------------------------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| allow                             | object               |          | Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.                                                      |
| aws\_iid\_ttl                     | duration             |          | AWSIIDTTL is the TTL to use for AWS EC2 Instance Identity Documents used to join the cluster with this token.                                           |
| azure                             | object               |          | Azure allows the configuration of options specific to the "azure" join method.                                                                          |
| bot\_name                         | string               |          | BotName is the name of the bot this token grants access to, if any                                                                                      |
| circleci                          | object               |          | CircleCI allows the configuration of options specific to the "circleci" join method.                                                                    |
| gcp                               | object               |          | GCP allows the configuration of options specific to the "gcp" join method.                                                                              |
| github                            | object               |          | GitHub allows the configuration of options specific to the "github" join method.                                                                        |
| gitlab                            | object               |          | GitLab allows the configuration of options specific to the "gitlab" join method.                                                                        |
| join\_method                      | string               |          | JoinMethod is the joining method required in order to use this token. Supported joining methods include "token", "ec2", and "iam".                      |
| kubernetes                        | object               |          | Kubernetes allows the configuration of options specific to the "kubernetes" join method.                                                                |
| roles                             | array of strings     | \*       | Roles is a list of roles associated with the token, that will be converted to metadata in the SSH and X509 certificates issued to the user of the token |
| suggested\_agent\_matcher\_labels | map of string arrays |          |                                                                                                                                                         |
| suggested\_labels                 | map of string arrays |          |                                                                                                                                                         |

#### spec.allow

Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.

| Name         | Type             | Required | Description                                                                                                                               |
| ------------ | ---------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| aws\_account | string           |          | AWSAccount is the AWS account ID.                                                                                                         |
| aws\_arn     | string           |          | AWSARN is used for the IAM join method, the AWS identity of joining nodes must match this ARN. Supports wildcards "\*" and "?".           |
| aws\_regions | array of strings |          | AWSRegions is used for the EC2 join method and is a list of AWS regions a node is allowed to join from.                                   |
| aws\_role    | string           |          | AWSRole is used for the EC2 join method and is the the ARN of the AWS role that the auth server will assume in order to call the ec2 API. |

#### spec.azure

Azure allows the configuration of options specific to the "azure" join method.

| Name  | Type   | Required | Description                                                                                   |
| ----- | ------ | -------- | --------------------------------------------------------------------------------------------- |
| allow | object |          | Allow is a list of Rules, nodes using this token must match one allow rule to use this token. |

##### spec.azure.allow

Allow is a list of Rules, nodes using this token must match one allow rule to use this token.

| Name             | Type             | Required | Description                                                                         |
| ---------------- | ---------------- | -------- | ----------------------------------------------------------------------------------- |
| resource\_groups | array of strings |          | ResourceGroups is a list of Azure resource groups the node is allowed to join from. |
| subscription     | string           |          | Subscription is the Azure subscription.                                             |

#### spec.circleci

CircleCI allows the configuration of options specific to the "circleci" join method.

| Name             | Type   | Required | Description                                                                                        |
| ---------------- | ------ | -------- | -------------------------------------------------------------------------------------------------- |
| allow            | object |          | Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token. |
| organization\_id | string |          |                                                                                                    |

##### spec.circleci.allow

Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.

| Name        | Type   | Required | Description |
| ----------- | ------ | -------- | ----------- |
| context\_id | string |          |             |
| project\_id | string |          |             |

#### spec.gcp

GCP allows the configuration of options specific to the "gcp" join method.

| Name  | Type   | Required | Description                                                                                   |
| ----- | ------ | -------- | --------------------------------------------------------------------------------------------- |
| allow | object |          | Allow is a list of Rules, nodes using this token must match one allow rule to use this token. |

##### spec.gcp.allow

Allow is a list of Rules, nodes using this token must match one allow rule to use this token.

| Name              | Type             | Required | Description                                                                                                                                                            |
| ----------------- | ---------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| locations         | array of strings |          | Locations is a list of regions (e.g. "us-west1") and/or zones (e.g. "us-west1-b").                                                                                     |
| project\_ids      | array of strings |          | ProjectIDs is a list of project IDs (e.g. "\<example-id-123456>").                                                                                                     |
| service\_accounts | array of strings |          | ServiceAccounts is a list of service account emails (e.g. "\<project-number>[-compute@developer.gserviceaccount.com](mailto:-compute@developer.gserviceaccount.com)"). |

#### spec.github

GitHub allows the configuration of options specific to the "github" join method.

| Name                     | Type   | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------------ | ------ | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| allow                    | object |          | Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.                                                                                                                                                                                                                                                                                                                                                                                                  |
| enterprise\_server\_host | string |          | EnterpriseServerHost allows joining from runners associated with a GitHub Enterprise Server instance. When unconfigured, tokens will be validated against github.com, but when configured to the host of a GHES instance, then the tokens will be validated against host.  This value should be the hostname of the GHES instance, and should not include the scheme or a path. The instance must be accessible over HTTPS at this hostname and the certificate must be trusted by the Auth Server. |

##### spec.github.allow

Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.

| Name              | Type   | Required | Description                                                                                                                                                |
| ----------------- | ------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| actor             | string |          | The personal account that initiated the workflow run.                                                                                                      |
| environment       | string |          | The name of the environment used by the job.                                                                                                               |
| ref               | string |          | The git ref that triggered the workflow run.                                                                                                               |
| ref\_type         | string |          | The type of ref, for example: "branch".                                                                                                                    |
| repository        | string |          | The repository from where the workflow is running. This includes the name of the owner e.g `gravitational/teleport`                                        |
| repository\_owner | string |          | The name of the organization in which the repository is stored.                                                                                            |
| sub               | string |          | Sub also known as Subject is a string that roughly uniquely identifies the workload. The format of this varies depending on the type of github action run. |
| workflow          | string |          | The name of the workflow.                                                                                                                                  |

#### spec.gitlab

GitLab allows the configuration of options specific to the "gitlab" join method.

| Name   | Type   | Required | Description                                                                                                                                                         |
| ------ | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| allow  | object |          | Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.                                                                  |
| domain | string |          | Domain is the domain of your GitLab instance. This will default to `gitlab.com` - but can be set to the domain of your self-hosted GitLab e.g `gitlab.example.com`. |

##### spec.gitlab.allow

Allow is a list of TokenRules, nodes using this token must match one allow rule to use this token.

| Name             | Type   | Required | Description                                                                                                                                                                                                                                      |
| ---------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| environment      | string |          | Environment limits access by the environment the job deploys to (if one is associated)                                                                                                                                                           |
| namespace\_path  | string |          | NamespacePath is used to limit access to jobs in a group or user's projects. Example: `mygroup`                                                                                                                                                  |
| pipeline\_source | string |          | PipelineSource limits access by the job pipeline source type. [https://docs.gitlab.com/ee/ci/jobs/job\_control.html#common-if-clauses-for-rules](https://docs.gitlab.com/ee/ci/jobs/job_control.html#common-if-clauses-for-rules) Example: `web` |
| project\_path    | string |          | ProjectPath is used to limit access to jobs belonging to an individual project. Example: `mygroup/myproject`                                                                                                                                     |
| ref              | string |          | Ref allows access to be limited to jobs triggered by a specific git ref. Ensure this is used in combination with ref\_type.                                                                                                                      |
| ref\_type        | string |          | RefType allows access to be limited to jobs triggered by a specific git ref type. Example: `branch` or `tag`                                                                                                                                     |
| sub              | string |          | Sub roughly uniquely identifies the workload. Example: `project_path:mygroup/my-project:ref_type:branch:ref:main` project\_path:{group}/{project}:ref\_type:{type}:ref:{branch_name}                                                             |

#### spec.kubernetes

Kubernetes allows the configuration of options specific to the "kubernetes" join method.

| Name  | Type   | Required | Description                                                                                   |
| ----- | ------ | -------- | --------------------------------------------------------------------------------------------- |
| allow | object |          | Allow is a list of Rules, nodes using this token must match one allow rule to use this token. |

##### spec.kubernetes.allow

Allow is a list of Rules, nodes using this token must match one allow rule to use this token.

| Name             | Type   | Required | Description                                                                                                         |
| ---------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------- |
| service\_account | string |          | ServiceAccount is the namespaced name of the Kubernetes service account. Its format is "namespace:service-account". |

Example:

```
# Teleport Provision Token resource

resource "teleport_provision_token" "example" {
  metadata = {
    expires = "2022-10-12T07:20:51Z"
    description = "Example token"

    labels = {
      example = "yes"
      "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
    }
  }

  spec = {
    roles = ["Node", "Auth"]
  }
}

resource "teleport_provision_token" "iam-token" {
  metadata = {
    name = "iam-token"
  }
  spec = {
    roles       = ["Bot"]
    bot_name    = "mybot"
    join_method = "iam"
    allow = [{
      aws_account = "123456789012"
    }]
  }
}

```

## teleport\_role

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object |          | Spec is a role specification                                     |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is version                                               |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a role specification

| Name    | Type   | Required | Description                                                                             |
| ------- | ------ | -------- | --------------------------------------------------------------------------------------- |
| allow   | object |          | Allow is the set of conditions evaluated to grant access.                               |
| deny    | object |          | Deny is the set of conditions evaluated to deny access. Deny takes priority over allow. |
| options | object |          | Options is for OpenSSH options like agent forwarding.                                   |

#### spec.allow

Allow is the set of conditions evaluated to grant access.

| Name                                 | Type                 | Required | Description                                                                                                                     |
| ------------------------------------ | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| app\_labels                          | map of string arrays |          |                                                                                                                                 |
| app\_labels\_expression              | string               |          | AppLabelsExpression is a predicate expression used to allow/deny access to Apps.                                                |
| aws\_role\_arns                      | array of strings     |          | AWSRoleARNs is a list of AWS role ARNs this role is allowed to assume.                                                          |
| azure\_identities                    | array of strings     |          | AzureIdentities is a list of Azure identities this role is allowed to assume.                                                   |
| cluster\_labels                      | map of string arrays |          |                                                                                                                                 |
| cluster\_labels\_expression          | string               |          | ClusterLabelsExpression is a predicate expression used to allow/deny access to remote Teleport clusters.                        |
| db\_labels                           | map of string arrays |          |                                                                                                                                 |
| db\_labels\_expression               | string               |          | DatabaseLabelsExpression is a predicate expression used to allow/deny access to Databases.                                      |
| db\_names                            | array of strings     |          | DatabaseNames is a list of database names this role is allowed to connect to.                                                   |
| db\_roles                            | array of strings     |          | DatabaseRoles is a list of databases roles for automatic user creation.                                                         |
| db\_service\_labels                  | map of string arrays |          |                                                                                                                                 |
| db\_service\_labels\_expression      | string               |          | DatabaseServiceLabelsExpression is a predicate expression used to allow/deny access to Database Services.                       |
| db\_users                            | array of strings     |          | DatabaseUsers is a list of databases users this role is allowed to connect as.                                                  |
| desktop\_groups                      | array of strings     |          | DesktopGroups is a list of groups for created desktop users to be added to                                                      |
| gcp\_service\_accounts               | array of strings     |          | GCPServiceAccounts is a list of GCP service accounts this role is allowed to assume.                                            |
| group\_labels                        | map of string arrays |          |                                                                                                                                 |
| group\_labels\_expression            | string               |          | GroupLabelsExpression is a predicate expression used to allow/deny access to user groups.                                       |
| host\_groups                         | array of strings     |          | HostGroups is a list of groups for created users to be added to                                                                 |
| host\_sudoers                        | array of strings     |          | HostSudoers is a list of entries to include in a users sudoer file                                                              |
| impersonate                          | object               |          | Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means. |
| join\_sessions                       | object               |          | JoinSessions specifies policies to allow users to join other sessions.                                                          |
| kubernetes\_groups                   | array of strings     |          | KubeGroups is a list of kubernetes groups                                                                                       |
| kubernetes\_labels                   | map of string arrays |          |                                                                                                                                 |
| kubernetes\_labels\_expression       | string               |          | KubernetesLabelsExpression is a predicate expression used to allow/deny access to kubernetes clusters.                          |
| kubernetes\_resources                | object               |          | KubernetesResources is the Kubernetes Resources this Role grants access to.                                                     |
| kubernetes\_users                    | array of strings     |          | KubeUsers is an optional kubernetes users to impersonate                                                                        |
| logins                               | array of strings     |          | Logins is a list of \*nix system logins.                                                                                        |
| node\_labels                         | map of string arrays |          |                                                                                                                                 |
| node\_labels\_expression             | string               |          | NodeLabelsExpression is a predicate expression used to allow/deny access to SSH nodes.                                          |
| request                              | object               |          |                                                                                                                                 |
| require\_session\_join               | object               |          | RequireSessionJoin specifies policies for required users to start a session.                                                    |
| review\_requests                     | object               |          | ReviewRequests defines conditions for submitting access reviews.                                                                |
| rules                                | object               |          | Rules is a list of rules and their access levels. Rules are a high level construct used for access control.                     |
| windows\_desktop\_labels             | map of string arrays |          |                                                                                                                                 |
| windows\_desktop\_labels\_expression | string               |          | WindowsDesktopLabelsExpression is a predicate expression used to allow/deny access to Windows desktops.                         |
| windows\_desktop\_logins             | array of strings     |          | WindowsDesktopLogins is a list of desktop login names allowed/denied for Windows desktops.                                      |

##### spec.allow\.impersonate

Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means.

| Name  | Type             | Required | Description                                                                                                    |
| ----- | ---------------- | -------- | -------------------------------------------------------------------------------------------------------------- |
| roles | array of strings |          | Roles is a list of resources this role is allowed to impersonate                                               |
| users | array of strings |          | Users is a list of resources this role is allowed to impersonate, could be an empty list or a Wildcard pattern |
| where | string           |          | Where specifies optional advanced matcher                                                                      |

##### spec.allow\.join\_sessions

JoinSessions specifies policies to allow users to join other sessions.

| Name  | Type             | Required | Description                                                     |
| ----- | ---------------- | -------- | --------------------------------------------------------------- |
| kinds | array of strings |          | Kinds are the session kinds this policy applies to.             |
| modes | array of strings |          | Modes is a list of permitted participant modes for this policy. |
| name  | string           |          | Name is the name of the policy.                                 |
| roles | array of strings |          | Roles is a list of roles that you can join the session of.      |

##### spec.allow\.kubernetes\_resources

KubernetesResources is the Kubernetes Resources this Role grants access to.

| Name      | Type   | Required | Description                                                                         |
| --------- | ------ | -------- | ----------------------------------------------------------------------------------- |
| kind      | string |          | Kind specifies the Kubernetes Resource type. At the moment only "pod" is supported. |
| name      | string |          | Name is the resource name. It supports wildcards.                                   |
| namespace | string |          | Namespace is the resource namespace. It supports wildcards.                         |

##### spec.allow\.request

| Name                 | Type                 | Required | Description                                                                                                                                                                                                                                       |
| -------------------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| annotations          | map of string arrays |          |                                                                                                                                                                                                                                                   |
| claims\_to\_roles    | object               |          | ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.                                                                                                                                                                         |
| max\_duration        | duration             |          | MaxDuration is the amount of time the access will be granted for. If this is zero, the default duration is used.                                                                                                                                  |
| roles                | array of strings     |          | Roles is the name of roles which will match the request rule.                                                                                                                                                                                     |
| search\_as\_roles    | array of strings     |          | SearchAsRoles is a list of extra roles which should apply to a user while they are searching for resources as part of a Resource Access Request, and defines the underlying roles which will be requested as part of any Resource Access Request. |
| suggested\_reviewers | array of strings     |          | SuggestedReviewers is a list of reviewer suggestions.  These can be teleport usernames, but that is not a requirement.                                                                                                                            |
| thresholds           | object               |          | Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used.                                        |

###### spec.allow\.request.claims\_to\_roles

ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.

| Name  | Type             | Required | Description                                        |
| ----- | ---------------- | -------- | -------------------------------------------------- |
| claim | string           |          | Claim is a claim name.                             |
| roles | array of strings |          | Roles is a list of static teleport roles to match. |
| value | string           |          | Value is a claim value to match.                   |

###### spec.allow\.request.thresholds

Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used.

| Name    | Type   | Required | Description                                                                                  |
| ------- | ------ | -------- | -------------------------------------------------------------------------------------------- |
| approve | number |          | Approve is the number of matching approvals needed for state-transition.                     |
| deny    | number |          | Deny is the number of denials needed for state-transition.                                   |
| filter  | string |          | Filter is an optional predicate used to determine which reviews count toward this threshold. |
| name    | string |          | Name is the optional human-readable name of the threshold.                                   |

##### spec.allow\.require\_session\_join

RequireSessionJoin specifies policies for required users to start a session.

| Name      | Type             | Required | Description                                                                                     |
| --------- | ---------------- | -------- | ----------------------------------------------------------------------------------------------- |
| count     | number           |          | Count is the amount of people that need to be matched for this policy to be fulfilled.          |
| filter    | string           |          | Filter is a predicate that determines what users count towards this policy.                     |
| kinds     | array of strings |          | Kinds are the session kinds this policy applies to.                                             |
| modes     | array of strings |          | Modes is the list of modes that may be used to fulfill this policy.                             |
| name      | string           |          | Name is the name of the policy.                                                                 |
| on\_leave | string           |          | OnLeave is the behaviour that's used when the policy is no longer fulfilled for a live session. |

##### spec.allow\.review\_requests

ReviewRequests defines conditions for submitting access reviews.

| Name               | Type             | Required | Description                                                                                                                                                                                                           |
| ------------------ | ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| claims\_to\_roles  | object           |          | ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.                                                                                                                                             |
| preview\_as\_roles | array of strings |          | PreviewAsRoles is a list of extra roles which should apply to a reviewer while they are viewing a Resource Access Request for the purposes of viewing details such as the hostname and labels of requested resources. |
| roles              | array of strings |          | Roles is the name of roles which may be reviewed.                                                                                                                                                                     |
| where              | string           |          | Where is an optional predicate which further limits which requests are reviewable.                                                                                                                                    |

###### spec.allow\.review\_requests.claims\_to\_roles

ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.

| Name  | Type             | Required | Description                                        |
| ----- | ---------------- | -------- | -------------------------------------------------- |
| claim | string           |          | Claim is a claim name.                             |
| roles | array of strings |          | Roles is a list of static teleport roles to match. |
| value | string           |          | Value is a claim value to match.                   |

##### spec.allow\.rules

Rules is a list of rules and their access levels. Rules are a high level construct used for access control.

| Name      | Type             | Required | Description                                                     |
| --------- | ---------------- | -------- | --------------------------------------------------------------- |
| actions   | array of strings |          | Actions specifies optional actions taken when this rule matches |
| resources | array of strings |          | Resources is a list of resources                                |
| verbs     | array of strings |          | Verbs is a list of verbs                                        |
| where     | string           |          | Where specifies optional advanced matcher                       |

#### spec.deny

Deny is the set of conditions evaluated to deny access. Deny takes priority over allow.

| Name                                 | Type                 | Required | Description                                                                                                                     |
| ------------------------------------ | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| app\_labels                          | map of string arrays |          |                                                                                                                                 |
| app\_labels\_expression              | string               |          | AppLabelsExpression is a predicate expression used to allow/deny access to Apps.                                                |
| aws\_role\_arns                      | array of strings     |          | AWSRoleARNs is a list of AWS role ARNs this role is allowed to assume.                                                          |
| azure\_identities                    | array of strings     |          | AzureIdentities is a list of Azure identities this role is allowed to assume.                                                   |
| cluster\_labels                      | map of string arrays |          |                                                                                                                                 |
| cluster\_labels\_expression          | string               |          | ClusterLabelsExpression is a predicate expression used to allow/deny access to remote Teleport clusters.                        |
| db\_labels                           | map of string arrays |          |                                                                                                                                 |
| db\_labels\_expression               | string               |          | DatabaseLabelsExpression is a predicate expression used to allow/deny access to Databases.                                      |
| db\_names                            | array of strings     |          | DatabaseNames is a list of database names this role is allowed to connect to.                                                   |
| db\_roles                            | array of strings     |          | DatabaseRoles is a list of databases roles for automatic user creation.                                                         |
| db\_service\_labels                  | map of string arrays |          |                                                                                                                                 |
| db\_service\_labels\_expression      | string               |          | DatabaseServiceLabelsExpression is a predicate expression used to allow/deny access to Database Services.                       |
| db\_users                            | array of strings     |          | DatabaseUsers is a list of databases users this role is allowed to connect as.                                                  |
| desktop\_groups                      | array of strings     |          | DesktopGroups is a list of groups for created desktop users to be added to                                                      |
| gcp\_service\_accounts               | array of strings     |          | GCPServiceAccounts is a list of GCP service accounts this role is allowed to assume.                                            |
| group\_labels                        | map of string arrays |          |                                                                                                                                 |
| group\_labels\_expression            | string               |          | GroupLabelsExpression is a predicate expression used to allow/deny access to user groups.                                       |
| host\_groups                         | array of strings     |          | HostGroups is a list of groups for created users to be added to                                                                 |
| host\_sudoers                        | array of strings     |          | HostSudoers is a list of entries to include in a users sudoer file                                                              |
| impersonate                          | object               |          | Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means. |
| join\_sessions                       | object               |          | JoinSessions specifies policies to allow users to join other sessions.                                                          |
| kubernetes\_groups                   | array of strings     |          | KubeGroups is a list of kubernetes groups                                                                                       |
| kubernetes\_labels                   | map of string arrays |          |                                                                                                                                 |
| kubernetes\_labels\_expression       | string               |          | KubernetesLabelsExpression is a predicate expression used to allow/deny access to kubernetes clusters.                          |
| kubernetes\_resources                | object               |          | KubernetesResources is the Kubernetes Resources this Role grants access to.                                                     |
| kubernetes\_users                    | array of strings     |          | KubeUsers is an optional kubernetes users to impersonate                                                                        |
| logins                               | array of strings     |          | Logins is a list of \*nix system logins.                                                                                        |
| node\_labels                         | map of string arrays |          |                                                                                                                                 |
| node\_labels\_expression             | string               |          | NodeLabelsExpression is a predicate expression used to allow/deny access to SSH nodes.                                          |
| request                              | object               |          |                                                                                                                                 |
| require\_session\_join               | object               |          | RequireSessionJoin specifies policies for required users to start a session.                                                    |
| review\_requests                     | object               |          | ReviewRequests defines conditions for submitting access reviews.                                                                |
| rules                                | object               |          | Rules is a list of rules and their access levels. Rules are a high level construct used for access control.                     |
| windows\_desktop\_labels             | map of string arrays |          |                                                                                                                                 |
| windows\_desktop\_labels\_expression | string               |          | WindowsDesktopLabelsExpression is a predicate expression used to allow/deny access to Windows desktops.                         |
| windows\_desktop\_logins             | array of strings     |          | WindowsDesktopLogins is a list of desktop login names allowed/denied for Windows desktops.                                      |

##### spec.deny.impersonate

Impersonate specifies what users and roles this role is allowed to impersonate by issuing certificates or other possible means.

| Name  | Type             | Required | Description                                                                                                    |
| ----- | ---------------- | -------- | -------------------------------------------------------------------------------------------------------------- |
| roles | array of strings |          | Roles is a list of resources this role is allowed to impersonate                                               |
| users | array of strings |          | Users is a list of resources this role is allowed to impersonate, could be an empty list or a Wildcard pattern |
| where | string           |          | Where specifies optional advanced matcher                                                                      |

##### spec.deny.join\_sessions

JoinSessions specifies policies to allow users to join other sessions.

| Name  | Type             | Required | Description                                                     |
| ----- | ---------------- | -------- | --------------------------------------------------------------- |
| kinds | array of strings |          | Kinds are the session kinds this policy applies to.             |
| modes | array of strings |          | Modes is a list of permitted participant modes for this policy. |
| name  | string           |          | Name is the name of the policy.                                 |
| roles | array of strings |          | Roles is a list of roles that you can join the session of.      |

##### spec.deny.kubernetes\_resources

KubernetesResources is the Kubernetes Resources this Role grants access to.

| Name      | Type   | Required | Description                                                                         |
| --------- | ------ | -------- | ----------------------------------------------------------------------------------- |
| kind      | string |          | Kind specifies the Kubernetes Resource type. At the moment only "pod" is supported. |
| name      | string |          | Name is the resource name. It supports wildcards.                                   |
| namespace | string |          | Namespace is the resource namespace. It supports wildcards.                         |

##### spec.deny.request

| Name                 | Type                 | Required | Description                                                                                                                                                                                                                                       |
| -------------------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| annotations          | map of string arrays |          |                                                                                                                                                                                                                                                   |
| claims\_to\_roles    | object               |          | ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.                                                                                                                                                                         |
| max\_duration        | duration             |          | MaxDuration is the amount of time the access will be granted for. If this is zero, the default duration is used.                                                                                                                                  |
| roles                | array of strings     |          | Roles is the name of roles which will match the request rule.                                                                                                                                                                                     |
| search\_as\_roles    | array of strings     |          | SearchAsRoles is a list of extra roles which should apply to a user while they are searching for resources as part of a Resource Access Request, and defines the underlying roles which will be requested as part of any Resource Access Request. |
| suggested\_reviewers | array of strings     |          | SuggestedReviewers is a list of reviewer suggestions.  These can be teleport usernames, but that is not a requirement.                                                                                                                            |
| thresholds           | object               |          | Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used.                                        |

###### spec.deny.request.claims\_to\_roles

ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.

| Name  | Type             | Required | Description                                        |
| ----- | ---------------- | -------- | -------------------------------------------------- |
| claim | string           |          | Claim is a claim name.                             |
| roles | array of strings |          | Roles is a list of static teleport roles to match. |
| value | string           |          | Value is a claim value to match.                   |

###### spec.deny.request.thresholds

Thresholds is a list of thresholds, one of which must be met in order for reviews to trigger a state-transition.  If no thresholds are provided, a default threshold of 1 for approval and denial is used.

| Name    | Type   | Required | Description                                                                                  |
| ------- | ------ | -------- | -------------------------------------------------------------------------------------------- |
| approve | number |          | Approve is the number of matching approvals needed for state-transition.                     |
| deny    | number |          | Deny is the number of denials needed for state-transition.                                   |
| filter  | string |          | Filter is an optional predicate used to determine which reviews count toward this threshold. |
| name    | string |          | Name is the optional human-readable name of the threshold.                                   |

##### spec.deny.require\_session\_join

RequireSessionJoin specifies policies for required users to start a session.

| Name      | Type             | Required | Description                                                                                     |
| --------- | ---------------- | -------- | ----------------------------------------------------------------------------------------------- |
| count     | number           |          | Count is the amount of people that need to be matched for this policy to be fulfilled.          |
| filter    | string           |          | Filter is a predicate that determines what users count towards this policy.                     |
| kinds     | array of strings |          | Kinds are the session kinds this policy applies to.                                             |
| modes     | array of strings |          | Modes is the list of modes that may be used to fulfill this policy.                             |
| name      | string           |          | Name is the name of the policy.                                                                 |
| on\_leave | string           |          | OnLeave is the behaviour that's used when the policy is no longer fulfilled for a live session. |

##### spec.deny.review\_requests

ReviewRequests defines conditions for submitting access reviews.

| Name               | Type             | Required | Description                                                                                                                                                                                                           |
| ------------------ | ---------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| claims\_to\_roles  | object           |          | ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.                                                                                                                                             |
| preview\_as\_roles | array of strings |          | PreviewAsRoles is a list of extra roles which should apply to a reviewer while they are viewing a Resource Access Request for the purposes of viewing details such as the hostname and labels of requested resources. |
| roles              | array of strings |          | Roles is the name of roles which may be reviewed.                                                                                                                                                                     |
| where              | string           |          | Where is an optional predicate which further limits which requests are reviewable.                                                                                                                                    |

###### spec.deny.review\_requests.claims\_to\_roles

ClaimsToRoles specifies a mapping from claims (traits) to teleport roles.

| Name  | Type             | Required | Description                                        |
| ----- | ---------------- | -------- | -------------------------------------------------- |
| claim | string           |          | Claim is a claim name.                             |
| roles | array of strings |          | Roles is a list of static teleport roles to match. |
| value | string           |          | Value is a claim value to match.                   |

##### spec.deny.rules

Rules is a list of rules and their access levels. Rules are a high level construct used for access control.

| Name      | Type             | Required | Description                                                     |
| --------- | ---------------- | -------- | --------------------------------------------------------------- |
| actions   | array of strings |          | Actions specifies optional actions taken when this rule matches |
| resources | array of strings |          | Resources is a list of resources                                |
| verbs     | array of strings |          | Verbs is a list of verbs                                        |
| where     | string           |          | Where specifies optional advanced matcher                       |

#### spec.options

Options is for OpenSSH options like agent forwarding.

| Name                         | Type             | Required | Description                                                                                                                                                                |                                            |                                        |
| ---------------------------- | ---------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ | -------------------------------------- |
| cert\_extensions             | object           |          | CertExtensions specifies the key/values                                                                                                                                    |                                            |                                        |
| cert\_format                 | string           |          | CertificateFormat defines the format of the user certificate to allow compatibility with older versions of OpenSSH.                                                        |                                            |                                        |
| client\_idle\_timeout        | duration         |          | ClientIdleTimeout sets disconnect clients on idle timeout behavior, if set to 0 means do not disconnect, otherwise is set to the idle duration.                            |                                            |                                        |
| create\_db\_user             | bool             |          |                                                                                                                                                                            |                                            |                                        |
| create\_desktop\_user        | bool             |          |                                                                                                                                                                            |                                            |                                        |
| create\_host\_user           | bool             |          |                                                                                                                                                                            |                                            |                                        |
| create\_host\_user\_mode     | number           |          | CreateHostUserMode allows users to be automatically created on a host when not set to off                                                                                  |                                            |                                        |
| desktop\_clipboard           | bool             |          |                                                                                                                                                                            |                                            |                                        |
| desktop\_directory\_sharing  | bool             |          |                                                                                                                                                                            |                                            |                                        |
| device\_trust\_mode          | string           |          | DeviceTrustMode is the device authorization mode used for the resources associated with the role. See DeviceTrust.Mode. Reserved for future use, not yet used by Teleport. |                                            |                                        |
| disconnect\_expired\_cert    | bool             |          | DisconnectExpiredCert sets disconnect clients on expired certificates.                                                                                                     |                                            |                                        |
| enhanced\_recording          | array of strings |          | BPF defines what events to record for the BPF-based session recorder.                                                                                                      |                                            |                                        |
| forward\_agent               | bool             |          | ForwardAgent is SSH agent forwarding.                                                                                                                                      |                                            |                                        |
| idp                          | object           |          | IDP is a set of options related to accessing IdPs within Teleport. Requires Teleport Enterprise.                                                                           |                                            |                                        |
| lock                         | string           |          | Lock specifies the locking mode (strict                                                                                                                                    | best\_effort) to be applied with the role. |                                        |
| max\_connections             | number           |          | MaxConnections defines the maximum number of concurrent connections a user may hold.                                                                                       |                                            |                                        |
| max\_kubernetes\_connections | number           |          | MaxKubernetesConnections defines the maximum number of concurrent Kubernetes sessions a user may hold.                                                                     |                                            |                                        |
| max\_session\_ttl            | duration         |          | MaxSessionTTL defines how long a SSH session can last for.                                                                                                                 |                                            |                                        |
| max\_sessions                | number           |          | MaxSessions defines the maximum number of concurrent sessions per connection.                                                                                              |                                            |                                        |
| permit\_x11\_forwarding      | bool             |          | PermitX11Forwarding authorizes use of X11 forwarding.                                                                                                                      |                                            |                                        |
| pin\_source\_ip              | bool             |          | PinSourceIP forces the same client IP for certificate generation and usage                                                                                                 |                                            |                                        |
| port\_forwarding             | bool             |          |                                                                                                                                                                            |                                            |                                        |
| record\_session              | object           |          | RecordDesktopSession indicates whether desktop access sessions should be recorded. It defaults to true unless explicitly set to false.                                     |                                            |                                        |
| request\_access              | string           |          | RequestAccess defines the access request strategy (optional                                                                                                                | note                                       | always) where optional is the default. |
| request\_prompt              | string           |          | RequestPrompt is an optional message which tells users what they aught to                                                                                                  |                                            |                                        |
| require\_session\_mfa        | number           |          | RequireMFAType is the type of MFA requirement enforced for this role: 0:Off, 1:Session, 2:SessionAndHardwareKey, 3:HardwareKeyTouch                                        |                                            |                                        |
| ssh\_file\_copy              | bool             |          |                                                                                                                                                                            |                                            |                                        |

##### spec.options.cert\_extensions

CertExtensions specifies the key/values

| Name  | Type   | Required | Description                                                                              |
| ----- | ------ | -------- | ---------------------------------------------------------------------------------------- |
| mode  | number |          | Mode is the type of extension to be used -- currently critical-option is not supported   |
| name  | string |          | Name specifies the key to be used in the cert extension.                                 |
| type  | number |          | Type represents the certificate type being extended, only ssh is supported at this time. |
| value | string |          | Value specifies the value to be used in the cert extension.                              |

##### spec.options.idp

IDP is a set of options related to accessing IdPs within Teleport. Requires Teleport Enterprise.

| Name | Type   | Required | Description                                        |
| ---- | ------ | -------- | -------------------------------------------------- |
| saml | object |          | SAML are options related to the Teleport SAML IdP. |

###### spec.options.idp.saml

SAML are options related to the Teleport SAML IdP.

| Name    | Type | Required | Description |
| ------- | ---- | -------- | ----------- |
| enabled | bool |          |             |

##### spec.options.record\_session

RecordDesktopSession indicates whether desktop access sessions should be recorded. It defaults to true unless explicitly set to false.

| Name    | Type   | Required | Description                                           |
| ------- | ------ | -------- | ----------------------------------------------------- |
| default | string |          | Default indicates the default value for the services. |
| desktop | bool   |          |                                                       |
| ssh     | string |          | SSH indicates the session mode used on SSH sessions.  |

Example:

```
# Teleport Role resource

resource "teleport_role" "example" {
  metadata = {
    name        = "example"
    description = "Example Teleport Role"
    expires     = "2022-10-12T07:20:51Z"
    labels = {
      example  = "yes"
    }
  }

  spec = {
    options = {
      forward_agent           = false
      max_session_ttl         = "7m"
      port_forwarding         = false
      client_idle_timeout     = "1h"
      disconnect_expired_cert = true
      permit_x11_forwarding   = false
      request_access          = "denied"
    }

    allow = {
      logins = ["example"]

      rules = [{
        resources = ["user", "role"]
        verbs = ["list"]
      }]

      request = {
        roles = ["example"]
        claims_to_roles = [{
          claim = "example"
          value = "example"
          roles = ["example"]
        }]
      }

      node_labels = {
        example = ["yes"]
      }
    }

    deny = {
      logins = ["anonymous"]
    }
  }
}
```

## teleport\_saml\_connector

| Name      | Type   | Required | Description                                                       |
| --------- | ------ | -------- | ----------------------------------------------------------------- |
| metadata  | object |          | Metadata holds resource metadata.                                 |
| spec      | object | \*       | Spec is an SAML connector specification.                          |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources. |
| version   | string |          | Version is a resource version.                                    |

### metadata

Metadata holds resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is an SAML connector specification.

| Name                      | Type   | Required | Description                                                                                                                                                       |
| ------------------------- | ------ | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| acs                       | string | \*       | AssertionConsumerService is a URL for assertion consumer service on the service provider (Teleport's side).                                                       |
| allow\_idp\_initiated     | bool   |          | AllowIDPInitiated is a flag that indicates if the connector can be used for IdP-initiated logins.                                                                 |
| assertion\_key\_pair      | object |          | EncryptionKeyPair is a key pair used for decrypting SAML assertions.                                                                                              |
| attributes\_to\_roles     | object | \*       | AttributesToRoles is a list of mappings of attribute statements to roles.                                                                                         |
| audience                  | string |          | Audience uniquely identifies our service provider.                                                                                                                |
| cert                      | string |          | Cert is the identity provider certificate PEM. IDP signs \<Response> responses using this certificate.                                                            |
| display                   | string |          | Display controls how this connector is displayed.                                                                                                                 |
| entity\_descriptor        | string |          | EntityDescriptor is XML with descriptor. It can be used to supply configuration parameters in one XML file rather than supplying them in the individual elements. |
| entity\_descriptor\_url   | string |          | EntityDescriptorURL is a URL that supplies a configuration XML.                                                                                                   |
| issuer                    | string |          | Issuer is the identity provider issuer.                                                                                                                           |
| provider                  | string |          | Provider is the external identity provider.                                                                                                                       |
| service\_provider\_issuer | string |          | ServiceProviderIssuer is the issuer of the service provider (Teleport).                                                                                           |
| signing\_key\_pair        | object |          | SigningKeyPair is an x509 key pair used to sign AuthnRequest.                                                                                                     |
| sso                       | string |          | SSO is the URL of the identity provider's SSO service.                                                                                                            |

#### spec.assertion\_key\_pair

EncryptionKeyPair is a key pair used for decrypting SAML assertions.

| Name         | Type   | Required | Description                                   |
| ------------ | ------ | -------- | --------------------------------------------- |
| cert         | string |          | Cert is a PEM-encoded x509 certificate.       |
| private\_key | string |          | PrivateKey is a PEM encoded x509 private key. |

#### spec.attributes\_to\_roles

AttributesToRoles is a list of mappings of attribute statements to roles.

| Name  | Type             | Required | Description                                         |
| ----- | ---------------- | -------- | --------------------------------------------------- |
| name  | string           |          | Name is an attribute statement name.                |
| roles | array of strings |          | Roles is a list of static teleport roles to map to. |
| value | string           |          | Value is an attribute statement value to match.     |

#### spec.signing\_key\_pair

SigningKeyPair is an x509 key pair used to sign AuthnRequest.

| Name         | Type   | Required | Description                                   |
| ------------ | ------ | -------- | --------------------------------------------- |
| cert         | string |          | Cert is a PEM-encoded x509 certificate.       |
| private\_key | string |          | PrivateKey is a PEM encoded x509 private key. |

Example:

```
# Teleport SAML connector
#
# Please note that SAML connector will work in Enterprise version only. Check the setup docs:
# https://goteleport.com/docs/enterprise/sso/okta/

resource "teleport_saml_connector" "example" {
  # This block will tell Terraform to never update private key from our side if a keys are managed
  # from an outside of Terraform.

  # lifecycle {
  #   ignore_changes = [
  #     spec[0].signing_key_pair[0].cert,
  #     spec[0].signing_key_pair[0].private_key,
  #     spec[0].assertion_key_pair[0].cert,
  #     spec[0].assertion_key_pair[0].private_key,
  #   ]
  # }

  # This section tells Terraform that role example must be created before the SAML connector
  depends_on = [
    teleport_role.example
  ]

  metadata = {
    name = "example"
  }

  spec = {
    attributes_to_roles = [{
      name  = "groups"
      roles = ["example"]
      value = "okta-admin"
    },
    {
      name  = "groups"
      roles = ["example"]
      value = "okta-dev"
    }]

    acs               = "https://localhost:3025/v1/webapi/saml/acs"
    entity_descriptor = ""
  }
}
```

## teleport\_session\_recording\_config

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object |          | Spec is a SessionRecordingConfig specification                   |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is a resource version                                    |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a SessionRecordingConfig specification

| Name                      | Type   | Required | Description                                          |
| ------------------------- | ------ | -------- | ---------------------------------------------------- |
| mode                      | string |          | Mode controls where (or if) the session is recorded. |
| proxy\_checks\_host\_keys | bool   |          |                                                      |

Example:

```
# Teleport session recording config

resource "teleport_session_recording_config" "example" {
  metadata = {
    description = "Session recording config"
    labels = {
      "example" = "yes"
      "teleport.dev/origin" = "dynamic" // This label is added on Teleport side by default
    }
  }

  spec = {
    proxy_checks_host_keys = true
  }
}
```

## teleport\_trusted\_cluster

| Name      | Type   | Required | Description                                                       |
| --------- | ------ | -------- | ----------------------------------------------------------------- |
| metadata  | object |          | Metadata holds resource metadata.                                 |
| spec      | object | \*       | Spec is a Trusted Cluster specification.                          |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources. |
| version   | string |          | Version is a resource version.                                    |

### metadata

Metadata holds resource metadata.

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a Trusted Cluster specification.

| Name             | Type             | Required | Description                                                                                                                                                                         |
| ---------------- | ---------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| enabled          | bool             |          | Enabled is a bool that indicates if the TrustedCluster is enabled or disabled. Setting Enabled to false has a side effect of deleting the user and host certificate authority (CA). |
| role\_map        | object           |          | RoleMap specifies role mappings to remote roles.                                                                                                                                    |
| roles            | array of strings |          | Roles is a list of roles that users will be assuming when connecting to this cluster.                                                                                               |
| token            | string           |          | Token is the authorization token provided by another cluster needed by this cluster to join.                                                                                        |
| tunnel\_addr     | string           |          | ReverseTunnelAddress is the address of the SSH proxy server of the cluster to join. If not set, it is derived from \<metadata.name>:\<default reverse tunnel port>.                 |
| web\_proxy\_addr | string           |          | ProxyAddress is the address of the web proxy server of the cluster to join. If not set, it is derived from \<metadata.name>:\<default web proxy server port>.                       |

#### spec.role\_map

RoleMap specifies role mappings to remote roles.

| Name   | Type             | Required | Description                                   |
| ------ | ---------------- | -------- | --------------------------------------------- |
| local  | array of strings |          | Local specifies local roles to map to         |
| remote | string           |          | Remote specifies remote role name to map from |

Example:

```
# Teleport trusted cluster
#
# https://goteleport.com/docs/setup/admin/trustedclusters/

resource "teleport_trusted_cluster" "cluster" {
  metadata = {
    name = "primary"
    labels = {
      test = "yes"
    }
  }

  spec = {
    enabled = false
    role_map = [{
      remote = "test"
      local = ["admin"]
    }]
    proxy_addr = "localhost:3080"
    token = "salami"
  }
}

```

## teleport\_trusted\_device

| Name     | Type   | Required | Description                   |
| -------- | ------ | -------- | ----------------------------- |
| metadata | object |          | Metadata is resource metadata |
| spec     | object |          | Specification of the device.  |
| version  | string |          | Version is version            |

### metadata

Metadata is resource metadata

| Name   | Type           | Required | Description               |
| ------ | -------------- | -------- | ------------------------- |
| labels | map of strings |          | Labels is a set of labels |
| name   | string         |          | Name is an object name    |

### spec

Specification of the device.

| Name           | Type   | Required | Description |
| -------------- | ------ | -------- | ----------- |
| asset\_tag     | string | \*       |             |
| enroll\_status | string |          |             |
| os\_type       | string | \*       |             |
| owner          | string |          |             |
| profile        | object |          |             |
| source         | object |          |             |

#### spec.profile

| Name                    | Type             | Required | Description |
| ----------------------- | ---------------- | -------- | ----------- |
| external\_id            | string           |          |             |
| jamf\_binary\_version   | string           |          |             |
| model\_identifier       | string           |          |             |
| os\_build               | string           |          |             |
| os\_build\_supplemental | string           |          |             |
| os\_usernames           | array of strings |          |             |
| os\_version             | string           |          |             |
| update\_time            | RFC3339 time     |          |             |

#### spec.source

| Name   | Type   | Required | Description |
| ------ | ------ | -------- | ----------- |
| name   | string |          |             |
| origin | string |          |             |

Example:

```
# Trusted device resource

resource "teleport_trusted_device" "TESTDEVICE1" {
  spec = {
    asset_tag = "TESTDEVICE1"
    os_type   = "macos"
  }
}

```

## teleport\_user

| Name      | Type   | Required | Description                                                      |
| --------- | ------ | -------- | ---------------------------------------------------------------- |
| metadata  | object |          | Metadata is resource metadata                                    |
| spec      | object |          | Spec is a user specification                                     |
| sub\_kind | string |          | SubKind is an optional resource sub kind, used in some resources |
| version   | string |          | Version is version                                               |

### metadata

Metadata is resource metadata

| Name        | Type           | Required | Description                                                                                            |
| ----------- | -------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| description | string         |          | Description is object description                                                                      |
| expires     | RFC3339 time   |          | Expires is a global expiry time header can be set on any resource in the system.                       |
| labels      | map of strings |          | Labels is a set of labels                                                                              |
| name        | string         | \*       | Name is an object name                                                                                 |
| namespace   | string         |          | Namespace is object namespace. The field should be called "namespace" when it returns in Teleport 2.4. |

### spec

Spec is a user specification

| Name                 | Type                 | Required | Description                                                                                                                           |
| -------------------- | -------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| github\_identities   | object               |          | GithubIdentities list associated Github OAuth2 identities that let user log in using externally verified identity                     |
| oidc\_identities     | object               |          | OIDCIdentities lists associated OpenID Connect identities that let user log in using externally verified identity                     |
| roles                | array of strings     |          | Roles is a list of roles assigned to user                                                                                             |
| saml\_identities     | object               |          | SAMLIdentities lists associated SAML identities that let user log in using externally verified identity                               |
| traits               | map of string arrays |          |                                                                                                                                       |
| trusted\_device\_ids | array of strings     |          | TrustedDeviceIDs contains the IDs of trusted devices enrolled by the user. Managed by the Device Trust subsystem, avoid manual edits. |

#### spec.github\_identities

GithubIdentities list associated Github OAuth2 identities that let user log in using externally verified identity

| Name          | Type   | Required | Description                                                               |
| ------------- | ------ | -------- | ------------------------------------------------------------------------- |
| connector\_id | string |          | ConnectorID is id of registered OIDC connector, e.g. 'google-example.com' |
| username      | string |          | Username is username supplied by external identity provider               |

#### spec.oidc\_identities

OIDCIdentities lists associated OpenID Connect identities that let user log in using externally verified identity

| Name          | Type   | Required | Description                                                               |
| ------------- | ------ | -------- | ------------------------------------------------------------------------- |
| connector\_id | string |          | ConnectorID is id of registered OIDC connector, e.g. 'google-example.com' |
| username      | string |          | Username is username supplied by external identity provider               |

#### spec.saml\_identities

SAMLIdentities lists associated SAML identities that let user log in using externally verified identity

| Name          | Type   | Required | Description                                                               |
| ------------- | ------ | -------- | ------------------------------------------------------------------------- |
| connector\_id | string |          | ConnectorID is id of registered OIDC connector, e.g. 'google-example.com' |
| username      | string |          | Username is username supplied by external identity provider               |

Example:

```
# Teleport User resource

resource "teleport_user" "example" {
  # Tells Terraform that the role could not be destroyed while this user exists
  depends_on = [
    teleport_role.example
  ]

  metadata = {
    name        = "example"
    description = "Example Teleport User"

    expires = "2022-10-12T07:20:50Z"

    labels = {
      example = "yes"
    }
  }

  spec = {
    roles = ["example"]

    oidc_identities = [{
      connector_id = "oidc1"
      username     = "example"
    }]

    traits = {
      "logins1" = ["example"]
      "logins2" = ["example"]
    }

    github_identities = [{
      connector_id = "github"
      username     = "example"
    }]

    saml_identities = [{
      connector_id = "example-saml"
      username     = "example"
    }]
  }
}
```
